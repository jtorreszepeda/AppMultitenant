@page "/"

<PageTitle>Dashboard - AppMultiTenant</PageTitle>

<div class="container">
    <h4 class="dashboard-title">Dashboard</h4>
    
    <div class="grid">
        <div class="grid-item">
            <div class="card">
                <p class="subtitle">Usuarios Activos</p>
                <h4 class="stat-value">@_userCount</h4>
                <hr class="divider" />
                <a href="/users" class="link">Ver detalle</a>
            </div>
        </div>
        
        <div class="grid-item">
            <div class="card">
                <p class="subtitle">Roles</p>
                <h4 class="stat-value">@_roleCount</h4>
                <hr class="divider" />
                <a href="/roles" class="link">Ver detalle</a>
            </div>
        </div>
        
        <div class="grid-item">
            <div class="card">
                <p class="subtitle">Secciones Definidas</p>
                <h4 class="stat-value">@_sectionCount</h4>
                <hr class="divider" />
                <a href="/sectiondefinitions" class="link">Ver detalle</a>
            </div>
        </div>
        
        <div class="grid-item">
            <div class="card">
                <p class="subtitle">Estado</p>
                <h4 class="stat-value success-text">Activo</h4>
                <hr class="divider" />
                <span class="chip success">OK</span>
            </div>
        </div>
    </div>
    
    <div class="grid mt-4">
        <div class="grid-item-large">
            <div class="card">
                <h6 class="card-title">Actividad Reciente</h6>
                <hr class="divider mb-4" />
                
                @if (_recentActivities.Any())
                {
                    <div class="list">
                        @foreach (var activity in _recentActivities)
                        {
                            <div class="list-item">
                                <div class="flex-row">
                                    <div class="avatar @activity.ColorClass">@activity.Icon</div>
                                    <div>
                                        <p class="body-text">@activity.Description</p>
                                        <p class="caption-text">@activity.Timestamp.ToString("g")</p>
                                    </div>
                                </div>
                            </div>
                        }
                    </div>
                }
                else
                {
                    <p class="secondary-text">No hay actividades recientes para mostrar.</p>
                }
            </div>
        </div>
        
        <div class="grid-item-small">
            <div class="card">
                <h6 class="card-title">Acciones Rápidas</h6>
                <hr class="divider mb-4" />
                
                <button class="button primary full-width mb-2">
                    <span class="button-icon">👤+</span>
                    <span>Crear Usuario</span>
                </button>
                <button class="button secondary full-width mb-2">
                    <span class="button-icon">➕</span>
                    <span>Nueva Sección</span>
                </button>
                <button class="button info full-width mb-2">
                    <span class="button-icon">🔒</span>
                    <span>Configurar Roles</span>
                </button>
                <button class="button default full-width">
                    <span class="button-icon">⚙️</span>
                    <span>Configuración</span>
                </button>
            </div>
            
            <div class="card mt-4">
                <h6 class="card-title">Información del Sistema</h6>
                <hr class="divider mb-4" />
                
                <p class="body-text"><b>Inquilino:</b> @_tenantName</p>
                <p class="body-text"><b>Versión:</b> v1.0.0</p>
                <p class="body-text"><b>Último acceso:</b> @DateTime.Now.ToString("g")</p>
            </div>
        </div>
    </div>
</div>

@code {
    // Datos de ejemplo para la demostración
    private int _userCount = 24;
    private int _roleCount = 6;
    private int _sectionCount = 8;
    private string _tenantName = "Acme Corporation";
    
    private List<RecentActivity> _recentActivities = new List<RecentActivity>
    {
        new RecentActivity 
        { 
            Description = "Usuario 'jsmith' ha iniciado sesión", 
            Timestamp = DateTime.Now.AddMinutes(-5),
            Icon = "👤",
            ColorClass = "avatar-primary"
        },
        new RecentActivity 
        { 
            Description = "Se ha creado un nuevo rol 'Editor'", 
            Timestamp = DateTime.Now.AddHours(-2),
            Icon = "🔒",
            ColorClass = "avatar-info"
        },
        new RecentActivity 
        { 
            Description = "Se ha modificado la sección 'Inventario'", 
            Timestamp = DateTime.Now.AddHours(-4),
            Icon = "📋",
            ColorClass = "avatar-warning"
        },
        new RecentActivity 
        { 
            Description = "Se ha agregado un nuevo usuario 'alopez'", 
            Timestamp = DateTime.Now.AddDays(-1),
            Icon = "👤+",
            ColorClass = "avatar-success"
        },
        new RecentActivity 
        { 
            Description = "Actualización de configuración completada", 
            Timestamp = DateTime.Now.AddDays(-2),
            Icon = "⚙️",
            ColorClass = "avatar-secondary"
        }
    };
    
    private class RecentActivity
    {
        public string Description { get; set; }
        public DateTime Timestamp { get; set; }
        public string Icon { get; set; }
        public string ColorClass { get; set; }
    }
}
