@page "/"

<PageTitle>Inicio - AppMultiTenant</PageTitle>

<div class="home-container full-width">
    <div class="welcome-section">
        <h1 class="welcome-title">Bienvenido a AppMultiTenant</h1>
        <p class="welcome-subtitle">Plataforma de gestión multiinquilino</p>
    </div>

    <div class="quick-access-grid">
        <AuthorizeView Roles="SystemAdmin,TenantAdmin">
            <div class="access-card users-card">
                <div class="card-icon">👤</div>
                <div class="card-content">
                    <h3>Usuarios</h3>
                    <p>Gestione usuarios y permisos</p>
                    <a href="/users" class="card-link">Acceder</a>
                </div>
            </div>
        </AuthorizeView>
        
        <AuthorizeView Roles="SystemAdmin,TenantAdmin">
            <div class="access-card roles-card">
                <div class="card-icon">🔒</div>
                <div class="card-content">
                    <h3>Roles</h3>
                    <p>Configure roles del sistema</p>
                    <a href="/roles" class="card-link">Acceder</a>
                </div>
            </div>
        </AuthorizeView>
        
        <AuthorizeView Roles="SystemAdmin,TenantAdmin">
            <div class="access-card sections-card">
                <div class="card-icon">📋</div>
                <div class="card-content">
                    <h3>Secciones</h3>
                    <p>Defina secciones personalizadas</p>
                    <a href="/sectiondefinitions" class="card-link">Acceder</a>
                </div>
            </div>
        </AuthorizeView>
        
        <AuthorizeView Roles="SystemAdmin">
            <div class="access-card tenants-card">
                <div class="card-icon">🏢</div>
                <div class="card-content">
                    <h3>Inquilinos</h3>
                    <p>Administre inquilinos del sistema</p>
                    <a href="/systemadmin/tenants" class="card-link">Acceder</a>
                </div>
            </div>
        </AuthorizeView>
    </div>
    
    <div class="system-status">
        <div class="status-card">
            <h3>Estado del Sistema</h3>
            <div class="status-indicator active"></div>
            <p>Sistema funcionando correctamente</p>
            <div class="system-info">
                <p><strong>Inquilino:</strong> @_tenantName</p>
                <p><strong>Versión:</strong> v1.0.0</p>
                <p><strong>Último acceso:</strong> @DateTime.Now.ToString("g")</p>
            </div>
        </div>
        
        <div class="recent-activity-card">
            <h3>Actividad Reciente</h3>
            @if (_recentActivities.Any())
            {
                <div class="activity-list">
                    @foreach (var activity in _recentActivities.Take(3))
                    {
                        <div class="activity-item">
                            <div class="activity-icon @activity.ColorClass">@activity.Icon</div>
                            <div class="activity-details">
                                <p class="activity-description">@activity.Description</p>
                                <p class="activity-time">@activity.Timestamp.ToString("g")</p>
                            </div>
                        </div>
                    }
                </div>
                @if (_recentActivities.Count > 3)
                {
                    <a href="#" class="view-all-link">Ver todas las actividades</a>
                }
            }
            else
            {
                <p class="no-activities">No hay actividades recientes para mostrar.</p>
            }
        </div>
    </div>
</div>

@code {
    private string _tenantName = "Acme Corporation";
    
    private List<RecentActivity> _recentActivities = new List<RecentActivity>
    {
        new RecentActivity 
        { 
            Description = "Usuario 'jsmith' ha iniciado sesión", 
            Timestamp = DateTime.Now.AddMinutes(-5),
            Icon = "👤",
            ColorClass = "avatar-primary"
        },
        new RecentActivity 
        { 
            Description = "Se ha creado un nuevo rol 'Editor'", 
            Timestamp = DateTime.Now.AddHours(-2),
            Icon = "🔒",
            ColorClass = "avatar-info"
        },
        new RecentActivity 
        { 
            Description = "Se ha modificado la sección 'Inventario'", 
            Timestamp = DateTime.Now.AddHours(-4),
            Icon = "📋",
            ColorClass = "avatar-warning"
        },
        new RecentActivity 
        { 
            Description = "Se ha agregado un nuevo usuario 'alopez'", 
            Timestamp = DateTime.Now.AddDays(-1),
            Icon = "👤+",
            ColorClass = "avatar-success"
        },
        new RecentActivity 
        { 
            Description = "Actualización de configuración completada", 
            Timestamp = DateTime.Now.AddDays(-2),
            Icon = "⚙️",
            ColorClass = "avatar-secondary"
        }
    };
    
    private class RecentActivity
    {
        public string Description { get; set; }
        public DateTime Timestamp { get; set; }
        public string Icon { get; set; }
        public string ColorClass { get; set; }
    }
}
